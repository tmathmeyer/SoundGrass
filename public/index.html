<html>

	<head>
		<title>
			soundgrass 420 blazeit
		</title>

		<link href="stylesheets/landingstyle.css" rel="stylesheet">
		<script src="javascripts/nonbounce.js"></script>
		<script src="javascripts/pagescripts.js"></script>
		<script src="/socket.io/socket.io.js.js"></script>

		<meta name="viewport" content="width=device-width, user-scalable=no" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-touch-fullscreen" content="yes" />
		<meta name="HandheldFriendly" content="True">


	</head>

	<body>
		<div id = "menu">
			<input type="text"   id="inpute" placeholder = "Enter Station"  autocorrect="off" onclick="clear_dropdown();" autofocus>
			<input type="button" id="presse" value = "GO" onclick="joinExact();">
		</div>
		<div id = "table">

		</div>



		<script>
			nonbounce("menu");

            document.getElementById("inpute").addEventListener("keyup", function(e){
                if (e.keyCode == e.DOM_VK_RETURN)
                    joinExact();
                else
                    setTimeout(clear_dropdown, 10);
            });

			socket = io.connect(location.origin);
			load_stations(socket);

			document.getElementById("inpute").addEventListener("click", filter_stations, false);

			var joinStation = function(){
				var stationinfo = {
					'stationName' : this.textContent,
					'stationData' : {
						'count' : 0,
						'owner' : 'test1',
						'playlist' : []
					}
				};

				socket.emit('create station', stationinfo);
				socket.emit('join station', stationinfo);
			}

			socket.on('join station', function(data){
				window.location = data.go_to;
			});

			socket.on('error', function(data){
				console.log("ERROR");
				console.log(data);
			});

			function joinExact(){
				var text = document.getElementById("inpute").value;
				if (text != ""){
                    text = {textContent: text}
					joinStation.call(text);
				}
			}
		</script>
	</body>

</html>
